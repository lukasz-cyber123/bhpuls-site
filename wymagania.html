<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wymagania prawne ‚Äî BHP i PPO≈ª | BHpuls</title>
  <meta name="description" content="Cotygodniowe, zwiƒôz≈Çe podsumowania zmian w przepisach BHP i PPO≈ª. Konkretne zalecenia, bran≈ºe, status, priorytet i ≈∫r√≥d≈Ça." />
  <style>
    :root{
      --brand:#008C45; --accent:#E9782A; --text:#1b1d1f; --muted:#6b7280;
      --bg:#fff; --card:#f8fafc; --border:#e5e7eb;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,"Noto Sans",sans-serif}
    .topbar{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid var(--border)}
    .topbar .bar{max-width:1200px;margin:auto;padding:10px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:inherit}
    .brand img{height:34px;width:auto;display:block}
    .brand span{font-weight:800;letter-spacing:.2px}
    .home-btn{display:inline-block;text-decoration:none;border:1px solid var(--border);padding:8px 12px;border-radius:10px;color:var(--brand);background:#fff}
    .home-btn:hover{background:#f9fafb}
    .wrap{max-width:1200px;margin:auto;padding:24px}
    header.hero{margin:12px 0 18px}
    header.hero h1{margin:0 0 6px;font-size:clamp(1.6rem,2.4vw,2.2rem);font-weight:800;letter-spacing:.2px}
    header.hero p{margin:0;color:var(--muted)}
    .quicklinks{margin:14px 0 24px;display:flex;gap:10px;flex-wrap:wrap}
    .quicklinks a{display:inline-block;padding:8px 12px;border:1px solid var(--border);border-radius:999px;text-decoration:none;color:var(--brand);background:#fff}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px}
    .card .head{display:flex;align-items:center;gap:12px;margin-bottom:10px}
    .icon{width:38px;height:38px;border-radius:10px;display:grid;place-items:center;color:#fff;background:linear-gradient(135deg,var(--brand),#0aa45a);font-size:20px}
    .kicker{margin:0;color:var(--muted);text-transform:uppercase;font-size:.76rem;letter-spacing:.08em}
    .title{margin:2px 0;font-size:1.1rem;font-weight:800}
    .period,.updated{font-size:.88rem;color:var(--muted)}
    .table-wrap{overflow-x:auto;border:1px solid var(--border);border-radius:10px;background:#fff}
    table{width:100%;border-collapse:collapse;min-width:900px}
    th,td{padding:10px 12px;border-bottom:1px solid var(--border);vertical-align:top}
    th{background:#f3f4f6;text-align:left;font-size:.9rem}
    td{font-size:.92rem}
    .no-updates td{color:var(--muted);font-style:italic;text-align:center}
    .chips{display:flex;gap:6px;flex-wrap:wrap}
    .chip{display:inline-flex;align-items:center;border-radius:999px;padding:2px 8px;font-size:.78rem;border:1px solid #ddd;background:#fff}
    .chip.status{border-color:rgba(0,0,0,.06);background:#eef2ff}
    .chip.prio-high{background:#fee2e2}
    .chip.prio-med{background:#fff7ed}
    .chip.prio-low{background:#ecfdf5}
    .src a{color:var(--brand);text-decoration:none}
    .src a:hover{text-decoration:underline}
    details.archive{margin-top:10px}
    details.archive summary{cursor:pointer;color:var(--brand);font-weight:700}
    .graphics{margin:30px 0}
    .graphics .g{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){.graphics .g{grid-template-columns:1fr 1fr}}
    figure{margin:0;border:1px solid var(--border);border-radius:14px;overflow:hidden;background:#fff}
    figure img{display:block;width:100%;height:auto}
    figcaption{padding:12px 14px;background:#fff}
    .gc-title{margin:0 0 6px;font-weight:800}
    .gc-sub{margin:0;color:var(--muted)}
    .cta{margin-top:10px}
    .cta a{display:inline-block;background:var(--accent);color:#fff;text-decoration:none;padding:10px 14px;border-radius:10px}
    .cta a:hover{opacity:.95}
    footer.ft{margin:26px 0 4px;color:var(--muted);font-size:.82rem}
    .error{margin-top:10px;color:#b91c1c}
  </style>
</head>

<body>
  <!-- Pasek z logo i powrotem -->
  <div class="topbar" role="banner">
    <div class="bar">
      <a href="/" class="brand" aria-label="BHpuls ‚Äì strona g≈Ç√≥wna">
        <img src="logo-bhpuls.png" alt="BHpuls" />
        <span>BHpuls</span>
      </a>
      <a class="home-btn" href="/">‚Üê Strona g≈Ç√≥wna</a>
    </div>
  </div>

  <main class="wrap">
    <header class="hero" aria-labelledby="h1">
      <h1 id="h1">Aktualne wymagania prawne ‚Äî BHP i&nbsp;PPO≈ª</h1>
      <p>Co tydzie≈Ñ, kr√≥tko i na temat. <strong>Tydzie≈Ñ: <span id="meta-period">08‚Äì14.09.2025</span> (pn‚Äìnd)</strong>.
        <span class="updated">Ostatnia aktualizacja: <span id="meta-updated">09.09.2025</span></span></p>
      <nav class="quicklinks" aria-label="Szybkie linki">
        <a href="#bhp">BHP</a><a href="#ppoz">PPO≈ª</a><a href="#grafiki">Masz mƒôtlik? Pomo≈ºemy ‚Üí</a>
      </nav>
    </header>

    <section class="grid" aria-label="Podsumowania">
      <!-- BHP -->
      <article class="card" id="bhp" aria-labelledby="bhp-title">
        <div class="head">
          <div class="icon" aria-hidden="true">üë∑</div>
          <div>
            <p class="kicker">Bezpiecze≈Ñstwo i higiena pracy</p>
            <h2 class="title" id="bhp-title">BHP ‚Äî podsumowanie tygodnia</h2>
            <div class="period">Okres: <span id="bhp-period">08‚Äì14.09.2025</span></div>
          </div>
        </div>

        <div class="table-wrap" role="region" aria-label="Tabela BHP (przewi≈Ñ w poziomie)">
          <table>
            <thead>
              <tr>
                <th style="width:140px">Publikator / nr</th>
                <th style="width:260px">Tytu≈Ç skr√≥cony</th>
                <th style="width:120px">Dotyczy</th>
                <th style="width:200px">Bran≈ºe</th>
                <th>Co zrobiƒá (zalecenia) + Termin</th>
                <th style="width:120px">Status</th>
                <th style="width:120px">Priorytet</th>
                <th style="width:110px">≈πr√≥d≈Ço</th>
              </tr>
            </thead>
            <tbody data-role="current"><!-- wype≈Çnia JS --></tbody>
          </table>
        </div>

        <details class="archive">
          <summary>Archiwum (poprzednie tygodnie)</summary>
          <div class="table-wrap" role="region" aria-label="Archiwum BHP">
            <table>
              <thead>
                <tr>
                  <th style="width:140px">Publikator / nr</th>
                  <th style="width:260px">Tytu≈Ç skr√≥cony</th>
                  <th style="width:120px">Dotyczy</th>
                  <th style="width:200px">Bran≈ºe</th>
                  <th>Co zrobiƒá + Termin</th>
                  <th style="width:120px">Status</th>
                  <th style="width:120px">Priorytet</th>
                  <th style="width:110px">≈πr√≥d≈Ço</th>
                </tr>
              </thead>
              <tbody data-role="archive"><!-- wype≈Çnia JS --></tbody>
            </table>
          </div>
        </details>
      </article>

      <!-- PPO≈ª -->
      <article class="card" id="ppoz" aria-labelledby="ppoz-title">
        <div class="head">
          <div class="icon" aria-hidden="true">üî•</div>
          <div>
            <p class="kicker">Ochrona przeciwpo≈ºarowa</p>
            <h2 class="title" id="ppoz-title">PPO≈ª ‚Äî podsumowanie tygodnia</h2>
            <div class="period">Okres: <span id="ppoz-period">08‚Äì14.09.2025</span></div>
          </div>
        </div>

        <div class="table-wrap" role="region" aria-label="Tabela PPO≈ª (przewi≈Ñ w poziomie)">
          <table>
            <thead>
              <tr>
                <th style="width:140px">Publikator / nr</th>
                <th style="width:260px">Tytu≈Ç skr√≥cony</th>
                <th style="width:120px">Dotyczy</th>
                <th style="width:200px">Bran≈ºe</th>
                <th>Co zrobiƒá (zalecenia) + Termin</th>
                <th style="width:120px">Status</th>
                <th style="width:120px">Priorytet</th>
                <th style="width:110px">≈πr√≥d≈Ço</th>
              </tr>
            </thead>
            <tbody data-role="current"><!-- wype≈Çnia JS --></tbody>
          </table>
        </div>

        <details class="archive">
          <summary>Archiwum (poprzednie tygodnie)</summary>
          <div class="table-wrap" role="region" aria-label="Archiwum PPO≈ª">
            <table>
              <thead>
                <tr>
                  <th style="width:140px">Publikator / nr</th>
                  <th style="width:260px">Tytu≈Ç skr√≥cony</th>
                  <th style="width:120px">Dotyczy</th>
                  <th style="width:200px">Bran≈ºe</th>
                  <th>Co zrobiƒá + Termin</th>
                  <th style="width:120px">Status</th>
                  <th style="width:120px">Priorytet</th>
                  <th style="width:110px">≈πr√≥d≈Ço</th>
                </tr>
              </thead>
              <tbody data-role="archive"><!-- wype≈Çnia JS --></tbody>
            </table>
          </div>
        </details>
      </article>
    </section>

    <!-- GRAFIKI + CTA -->
    <section class="graphics" id="grafiki" aria-labelledby="gfx-title">
      <h2 class="title" id="gfx-title" style="margin:10px 0 12px">Masz mƒôtlik? Pomo≈ºemy.</h2>
      <div class="g">
        <figure>
          <img src="wymagania-chaos.jpg" alt="Zestresowany mened≈ºer i symbole paragraf√≥w ‚Äî chaos w przepisach." loading="lazy">
          <figcaption>
            <p class="gc-title">Masz mƒôtlik w przepisach BHP i PPO≈ª?</p>
            <p class="gc-sub">Co tydzie≈Ñ podajemy zmiany po ludzku ‚Äî bez prawniczego be≈Çkotu.</p>
          </figcaption>
        </figure>
        <figure>
          <img src="wymagania-bhpuls.jpg" alt="Specjalista BHP w kasku z logo BHpuls ‚Äî doradztwo prawne BHP." loading="lazy">
          <figcaption>
            <p class="gc-title">Pomo≈ºecie? Pomo≈ºemy.</p>
            <p class="gc-sub">Audyty, wdro≈ºenia, szkolenia. Daj nam tydzie≈Ñ ‚Äî bƒôdzie ogarniƒôte.</p>
            <div class="cta"><a href="/#kontakt">‚Üê Zapytaj o pomoc</a></div>
          </figcaption>
        </figure>
      </div>
    </section>

    <footer class="ft">
      Materia≈Ç informacyjny ‚Äî nie stanowi porady prawnej. Zawsze weryfikuj u ≈∫r√≥d≈Ça (ISAP / RCL / EUR-Lex).
      <div id="err" class="error" aria-live="polite"></div>
    </footer>
  </main>

  <!-- JS: wczytuje wymagania-data.json i wype≈Çnia tabele -->
  <script>
  (async () => {
    const $ = (sel, root=document) => root.querySelector(sel);
    const esc = s => String(s ?? '').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    const statusLabel = { wchodzi:'Wchodzi w ≈ºycie', nowelizacja:'Nowelizacja', tekst_jednolity:'Tekst jednolity', traci:'Traci moc', nowe:'Nowe' };
    const prioClass = { wysoki:'prio-high', sredni:'prio-med', niski:'prio-low' };
    const prioLabel = s => s ? s.charAt(0).toUpperCase()+s.slice(1) : '';

    function rowHTML(it){
      const tags = (it.tags||[]).map(t=>`<span class="chip">${esc(t)}</span>`).join('');
      const st = statusLabel[it.status] || esc(it.status||'');
      const pr = prioClass[it.prio] || '';
      const dl = it.deadline ? `<br><strong>Termin:</strong> ${esc(it.deadline)}.` : '';
      return `<tr>
        <td>${esc(it.pub)}</td>
        <td>${esc(it.title)}</td>
        <td>${esc(it.topic)}</td>
        <td class="chips">${tags}</td>
        <td>${esc(it.action)}${dl}</td>
        <td class="chips"><span class="chip status">${esc(st)}</span></td>
        <td class="chips"><span class="chip ${pr}">${esc(prioLabel(it.prio))}</span></td>
        <td class="src"><a href="${esc(it.src||'#')}" target="_blank" rel="noopener">≈∫r√≥d≈Ço</a></td>
      </tr>`;
    }

    function fillCurrent(scopeSel, items, emptyMsg){
      const tbody = $(`${scopeSel} tbody[data-role="current"]`);
      if(!tbody) return;
      tbody.innerHTML = (items && items.length)
        ? items.map(rowHTML).join('')
        : `<tr class="no-updates"><td colspan="8">${esc(emptyMsg)}</td></tr>`;
    }

    function fillArchive(scopeSel, groups){
      const tbody = $(`${scopeSel} tbody[data-role="archive"]`);
      if(!tbody) return;
      tbody.innerHTML = (groups||[]).map(g=>{
        const header = `<tr><td colspan="8" style="background:#f3f4f6;font-weight:700">Okres: ${esc(g.period)} (pn‚Äìnd)</td></tr>`;
        const rows = (g.items||[]).map(rowHTML).join('');
        return header + rows;
      }).join('');
    }

    try{
      const res = await fetch('wymagania-data.json', {cache:'no-store'});
      const data = await res.json();

      // daty
      const period = data.meta?.period || '';
      const updated = data.meta?.updated || '';
      const setIf = (id,val)=>{ const el=$(id); if(el && val) el.textContent = val; };
      setIf('#meta-period', period); setIf('#meta-updated', updated);
      setIf('#bhp-period', period);  setIf('#ppoz-period', period);

      // tabele
      fillCurrent('#bhp', data.bhp, 'W ubieg≈Çym tygodniu nie opublikowano nowych akt√≥w prawnych dotyczƒÖcych BHP.');
      fillCurrent('#ppoz', data.ppoz, 'W ubieg≈Çym tygodniu nie opublikowano nowych akt√≥w prawnych dotyczƒÖcych ochrony przeciwpo≈ºarowej.');
      fillArchive('#bhp',  data.archive?.bhp  || []);
      fillArchive('#ppoz', data.archive?.ppoz || []);
    }catch(e){
      console.warn(e);
      const err = document.getElementById('err');
      if(err) err.textContent = 'Nie uda≈Ço siƒô wczytaƒá danych (wymagania-data.json). Sprawd≈∫, czy plik jest w katalogu g≈Ç√≥wnym.';
    }
  })();
  </script>

  <noscript>
    <div style="padding:12px;color:#b91c1c">Ta podstrona wymaga w≈ÇƒÖczonego JavaScript, aby wczytaƒá aktualne dane.</div>
  </noscript>
</body>
</html>
